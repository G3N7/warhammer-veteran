# Tacticus - Validated Warhammer 40k Rules Knowledge Base

**Purpose:** Persistent, self-correcting rules knowledge that prevents repeated mistakes across sessions.

**Update Protocol:**
- âœ… Add new verified rules with source + date
- âŒ Document mistakes and user corrections
- ðŸ”„ Update when rules change (new edition, FAQ, errata)

---

## Core Matched Play Rules

### Rule of Three âœ… VERIFIED
**Source:** Warhammer 40k 10th Edition Matched Play Rules
**Last Verified:** 2025-12-21
**Verification Method:** Wahapedia cross-reference + user correction

**THE RULE:**
Maximum 3 units with the same datasheet in matched play armies (except Battleline and Dedicated Transports).

**Validation History:**
- âŒ **2025-12-21 ERROR:** Built 2000pt list with 6x Wolf Guard Terminators units (VIOLATION)
  - **What went wrong:** Built 40-Terminator concept without validating unit count limits
  - **User correction:** "you can't have more than 3 of a given unit type"
  - **Lesson learned:** ALWAYS check Rule of Three BEFORE building lists, not after

- âœ… **2025-12-21 CORRECTED:** Verified via Wahapedia - max 3 units per datasheet applies to ALL non-Battleline/Transport units

**Application to Space Wolves:**
- Wolf Guard Terminators: MAX 3 units per army
- Legal configurations:
  - 3x 10-man = 30 Terminators (1,020pts)
  - 3x 5-man = 15 Terminators (510pts)
  - 2x 10-man + 1x 5-man = 25 Terminators (850pts)
  - 1x 10-man + 2x 5-man = 20 Terminators (680pts)

**CRITICAL VALIDATION STEP:**
Before building ANY list, count units by datasheet name and verify â‰¤ 3 units.

---

### Space Wolves Terminator Datasheet Availability âœ… VERIFIED
**Source:** Wahapedia Space Wolves faction page
**Last Verified:** 2025-12-21
**Verification Method:** Direct Wahapedia search + WebFetch validation

**AVAILABLE TO SPACE WOLVES:**
- âœ… **Wolf Guard Terminators** (Space Wolves-specific datasheet)

**NOT AVAILABLE TO SPACE WOLVES:**
- âŒ **Terminator Squad** (generic Space Marines only)
- âŒ **Terminator Assault Squad** (generic Space Marines only)
- âŒ **Deathwing Terminators** (Dark Angels only)
- âŒ **Deathwatch Terminators** (Deathwatch only)

**Validation History:**
- âŒ **2025-12-21 ASSUMPTION:** Thought there might be workarounds by using different Terminator datasheets
- âœ… **2025-12-21 VERIFIED:** Space Wolves have ONLY "Wolf Guard Terminators" - no mixing allowed

**Rule of Three Impact:**
- Only ONE Terminator datasheet available
- No loophole to exceed 30 Terminators by mixing types
- Hard cap: 30 Terminators maximum in any Space Wolves matched play army

---

### Wolf Guard Terminators Points Values âœ… VERIFIED
**Source:** Munitorum Field Manual December 2025
**Last Verified:** 2025-12-21

**POINTS:**
- 34pts per model (regardless of wargear)
- 5-man squad: 170pts
- 10-man squad: 340pts

**Unit Size Options:**
- Legal: 5 models OR 10 models
- Illegal: Any other size (6, 7, 8, 9, etc.)

---

### Wolf Guard Terminators Wargear Rules âœ… VERIFIED
**Source:** Wolf Guard Terminators Datasheet (Wahapedia)
**Last Verified:** 2025-12-22
**Verification Method:** User correction

**WARGEAR STRUCTURE:**
- **Pack Leader (1 per unit):** Can equip twin lightning claws OR standard weapons
- **Heavy Weapons (1 per 5 models):** Assault cannon + powerfist OR Cyclone missile launcher + powerfist
- **Regular Models:** Storm bolter + power weapon (can swap for storm shield, thunder hammer, etc.)

**LEGAL 10-MAN SQUAD EXAMPLE:**
- 1x Pack Leader with twin lightning claws
- 2x Heavy weapon models (assault cannons)
- 7x Regular Terminators (storm shields, thunder hammers, etc.)

**CRITICAL RULE:**
- Twin lightning claws = **PACK LEADER ONLY** (1 per unit maximum)
- Cannot give twin claws to multiple models in same squad

**Validation History:**
- âŒ **2025-12-22 ERROR:** Stated any model could take twin lightning claws
  - **User correction:** "twin claw is only able to be equiped by the pack leader and the pack leader is only 1 per unit/squad"
  - **What went wrong:** Did not verify Pack Leader restriction on datasheet
  - **Lesson learned:** Always check model type restrictions (Pack Leader vs regular models)
- âœ… **2025-12-22 CORRECTED:** Twin claws restricted to Pack Leader only (1 per unit)

---

### Saga of the Beastslayer Detachment âœ… VERIFIED
**Source:** Wahapedia Space Wolves Detachment Rules
**Last Verified:** 2025-12-21

**DETACHMENT ABILITY:**
Units from this detachment gain **Lethal Hits** when targeting:
- Characters
- Monsters
- Vehicles

**ENHANCEMENTS (Max 1 per Character):**
- **Blade of the Slayer** (25pts): Precision + enhanced damage vs big targets
- **Hunter's Instincts** (20pts): Re-roll wound rolls vs Characters/Monsters/Vehicles
- **The Pelt of Balewolf** (15pts): Stealth
- **Black Death** (15pts): Devastating Wounds

**LEGAL ENHANCEMENT ALLOCATION:**
- âœ… Logan gets Blade of Slayer (25pts)
- âœ… Arjac gets Hunter's Instincts (20pts)
- âŒ Cannot give both enhancements to same Character
- âŒ Cannot give more than 1 enhancement per Character

---

## Unit-Specific Rules

### Logan Grimnar âœ… VERIFIED
**Source:** Wahapedia Space Marines Epic Heroes
**Points:** 110pts
**Can Lead:** Wolf Guard Terminators (Terminator keyword)
**Epic Hero:** Only 1 per army

---

### Arjac Rockfist âœ… VERIFIED
**Source:** Wahapedia Space Marines Epic Heroes
**Points:** 95pts
**Can Lead:** Wolf Guard Terminators (Terminator keyword)
**Epic Hero:** Only 1 per army

---

### Bjorn the Fell-Handed âœ… VERIFIED
**Source:** Wahapedia Space Marines Epic Heroes
**Points:** 170pts
**Special Ability:** Ancient Tactician - Gain 1CP at start of each Command phase
**Epic Hero:** Only 1 per army

---

### Venerable Dreadnought âœ… VERIFIED
**Source:** Wahapedia Space Marines Units
**Points:** 140pts
**Space Wolves Access:** âœ… Yes (all Space Marines datasheets available)
**Aura:** Fervour of the Ancients - +1 to Advance/Charge rolls for SPACE WOLVES units within 6"
**Critical for:** Making 9" Deep Strike charges easier (becomes 8" with aura)

---

### Fenrisian Wolves âœ… VERIFIED
**Source:** Wahapedia Space Wolves Units
**Points:** 8pts per model
**Unit Sizes:** 5 or 10 models
**Role:** Screening, cheap objective holders
**NOT Battleline:** Subject to Rule of Three (max 3 units)

---

## Validation Checklist (Use BEFORE Building Lists)

**PRE-BUILD VALIDATION:**
- [ ] Count units by datasheet name
- [ ] Verify no datasheet appears >3 times (except Battleline/Transports)
- [ ] Check Epic Heroes (max 1 of each named character)
- [ ] Verify enhancements (max 1 per character, only on eligible models)
- [ ] Confirm points total matches mission size (500/1000/2000)
- [ ] Check detachment rules compliance

**POST-BUILD VALIDATION:**
- [ ] Re-count Rule of Three compliance
- [ ] Verify leader attachments are legal (correct keywords)
- [ ] Confirm wargear is legal per datasheet
- [ ] Double-check points math
- [ ] Review for any TO-specific restrictions (if applicable)

---

## Mistake Log & Corrections

### 2025-12-21: Rule of Three Violation
**Mistake:** Built 6x Wolf Guard Terminator units in 2000pt list
**User Correction:** "you can't have more than 3 of a given unit type"
**Root Cause:** Did not validate matched play rules before building concept
**Fix Applied:**
- Added Rule of Three to validated knowledge base
- Added pre-build validation checklist
- Updated critical_actions to load rules KB first

**Prevention:** Always check this KB BEFORE building lists, not after user correction.

### 2025-12-21: Incorrect GW Store URL Year Suffixes
**Mistake:** Generated URLs like `roboute-guilliman-2023` when actual URL is `Roboute-Guilliman-Ultramarines-Primarch-2020`
**User Correction:** "you seem to have gotten a bunch of the urls wrong. You consistantly get the year at the end of the url wrong"
**Root Cause:** Cannot reliably guess URL patterns without fetching actual pages
**Fix Applied:**
- **DO NOT construct direct product URLs manually**
- Use warhammer.com search URLs with pre-filled queries
- Format: `https://www.warhammer.com/en-US/plp?search=Unit%20Name` (URL-encoded spaces as %20)
- Example: `https://www.warhammer.com/en-US/plp?search=Roboute%20Guilliman`

**Prevention:** Always use search URLs with `/plp?search=`, never direct product URLs. User provided correct URL structure.

---

## Rule Update Protocol

**When rules change (new edition, FAQ, errata, MFM):**
1. Mark outdated rules with ðŸ”„ OUTDATED tag
2. Add new verified rule with updated date
3. Document what changed and why
4. Archive old rule in "Historical Rules" section if needed

**When user corrects a mistake:**
1. Add âŒ ERROR entry under relevant rule
2. Document what went wrong
3. Add âœ… CORRECTED entry with fix
4. Update validation checklist if needed

---

## Army List Documentation Standard

**When to Offer Full Explanation:**
After building ANY initial army list, always ask user: "Want me to generate a full tactical reference document for this list? I can also create 500pt and 1000pt scaled versions if you want all three points levels."

**Full Tactical Reference Format:**

### Section 1: Army Lists (Required)
For each points level (500/1000/2000):
- **List table:** Unit | Models | Role | Points
- **Tactical Overview:** Key strengths, weaknesses, how this differs from other points levels
- **How to Play:** 5-step tactical guide specific to this list

### Section 2: Full Model List (2000pt only)
- Breakdown by unit type (Characters, Terminators, Infantry, etc.)
- Total model count and wound count
- Firepower and melee output summary
- **IMPORTANT:** Only include ONCE, deduplicated

### Section 3: Weapon Loadouts & Options (Required)
- Loadout options table for each unit type
- Squad compositions for EACH squad at EACH points level
- Wargear choices explained with tactical reasoning

### Section 4: Unit Details (Required)
For EVERY unit in the army:
- Stats table (M/T/Sv/W/Ld/OC/Points)
- Wargear listing
- Special rules and abilities
- "Why Take This Unit" tactical explanation

### Section 5: Rules Reference (Required)
- Wahapedia link for EVERY unit
- Detachment rules with Stratagems and Enhancements
- Faction rules (Oath of Moment, etc.)

### Section 6: Painting Reference (Required)
- Official GW purchase links for EVERY unit
- Prices in USD
- Notes on box contents (models per box, build options)

### Section 7: 3D Printing Guide (Optional)
- Exact component counts for printing
- Arm pair combinations
- Total model requirements

**What NOT to Include:**
- âŒ Legality verification (stays in Tacticus memory)
- âŒ Lore explanations (user can ask Lorekeeper)
- âŒ Duplicate sections (consolidate model counts)
- âŒ Quick reference stats if already in Rules Reference

**Workflow:**
1. Build initial list at requested points level
2. Show list table + quick tactical summary
3. Ask: "Want full tactical reference document? (includes weapon loadouts, rules links, painting reference, and tactical guide)"
4. If yes, ask: "Want me to include 500pt and 1000pt scaled versions too?"
5. Generate document following format above

---

---

## List Building Protocol âœ… REQUIRED
**When to Use:** Before building ANY army list (initial or iterations)
**Last Updated:** 2025-12-22

**STEP-BY-STEP PROTOCOL:**

1. **Load Faction Army Rules**
   - URL: `https://wahapedia.ru/wh40k10ed/factions/{faction-name}/`
   - Extract: Faction abilities, army-wide special rules, available detachments
   - Example: `https://wahapedia.ru/wh40k10ed/factions/space-marines/space-wolves`

2. **Load Detachment Rules** (chosen detachment)
   - URL: `https://wahapedia.ru/wh40k10ed/factions/{faction-name}/#{Detachment-Name}`
   - Extract: Detachment ability, ALL Enhancements (with costs), Stratagems, restrictions
   - Example: `https://wahapedia.ru/wh40k10ed/factions/space-marines/space-wolves#Saga-of-the-Beastslayer`
   - **CRITICAL:** Enhancements are ALWAYS in the detachment rules section

3. **Load Unit Datasheets** (for each unit in planned list)
   - URL: `https://wahapedia.ru/wh40k10ed/factions/{faction-name}/{Unit-Name}`
   - Extract: Stats, wargear options, points costs, special rules, unit size options
   - Ask user for wargear structure if WebFetch cannot extract details

4. **Build List** (with full context loaded)
   - Validate Rule of Three compliance
   - Verify points totals
   - Check enhancement restrictions (max 1 per character)
   - Confirm wargear legality per datasheet

5. **Include Wahapedia Links** (in final document)
   - Link to faction rules in Rules Reference section
   - Link to detachment rules (with enhancements clearly marked)
   - Link to EVERY unit datasheet
   - Format: `[Unit Name](https://wahapedia.ru/wh40k10ed/factions/{faction}/{Unit})`

**WHY THIS MATTERS:**
- Prevents building lists with invalid enhancements (don't exist or wrong cost)
- Ensures all detachment abilities and Stratagems are referenced
- Provides user with clickable links to verify all rules
- Loads full context BEFORE making list decisions

**EXAMPLE WORKFLOW:**

```
User: "Build me a 2000pt Space Wolves list with Saga of the Beastslayer"

Step 1: Load https://wahapedia.ru/wh40k10ed/factions/space-marines/space-wolves
        â†’ Extract Oath of Moment, Space Wolves faction rules

Step 2: Load https://wahapedia.ru/wh40k10ed/factions/space-marines/space-wolves#Saga-of-the-Beastslayer
        â†’ Extract Lethal Hits ability
        â†’ Extract ALL 4 Enhancements:
          - Blade of the Slayer (25pts)
          - Hunter's Instincts (20pts)
          - The Pelt of Balewolf (15pts)
          - Black Death (15pts)

Step 3: Load datasheets for Wolf Guard Terminators, Logan Grimnar, etc.
        â†’ Extract wargear, points, restrictions

Step 4: Build list with enhancements from Step 2, units from Step 3

Step 5: Include all Wahapedia links in final document
```

---

## Universal Datasheet Wargear Pattern âœ… VALIDATED
**Source:** Cross-faction datasheet analysis
**Last Updated:** 2025-12-22
**Status:** User validated

**PATTERN:**
Most unit datasheets follow this structure:
1. **Special Models (varies per unit):** Sergeant/Pack Leader/Boss Nob/Champion - unique wargear options
   - Usually 1 per unit, but could be different (datasheet explicitly states quantity)
2. **Heavy/Special Weapons (X per Y models):** Limited special weapons
   - Example: "For every 10 models, 1 can take..." or "1 per 5 models can take..."
3. **Regular Models:** Standard wargear with swap options available to all non-special models

**VALIDATED EXAMPLES:**

**Wolf Guard Terminators (Space Wolves):**
- âœ… Pack Leader (1 per unit): Twin lightning claws OR standard weapons
- âœ… Heavy Weapons (1 per 5 models): Assault cannon OR Cyclone missile launcher
- âœ… Regular Models: Storm bolter + power weapon (swap options)

**Immortals (Necrons):**
- âŒ NO special models - all identical
- âŒ NO heavy weapon slots
- âœ… Regular Models: Gauss blaster OR tesla carbine (squad-wide, all must match)

**Ork Boyz (Orks):**
- âœ… Boss Nob (1 per unit): Power klaw OR kombi-weapon options (unique to Boss Nob)
- âœ… Heavy Weapons (1 per 10 models): Big shoota OR rokkit launcha
- âœ… Regular Models: Slugga + choppa OR shoota (any number can swap)

**PATTERN VARIANCE:**
- NOT all units have special models (e.g., Necron Immortals are uniform)
- Heavy weapon ratios vary: "1 per 5", "1 per 10", or none
- Some squads require uniform loadouts (Immortals), others allow mixing (Boyz)

**CRITICAL LEARNING:**
- **ALWAYS read the datasheet explicitly** - don't assume pattern
- Special model restrictions (Sergeant, Pack Leader, Boss Nob) are ALWAYS stated on datasheet
- Heavy weapon limits are ALWAYS explicitly stated (e.g., "1 per 5 models")
- WebFetch cannot extract datasheet details from Wahapedia (returns JavaScript/navigation only)

**KNOWN VALID WAHAPEDIA URLS:**
- Faction lists: `https://wahapedia.ru/wh40k10ed/factions/{faction-name}/`
- Unit datasheets: `https://wahapedia.ru/wh40k10ed/factions/{faction-name}/{Unit-Name}`
- Examples:
  - `https://wahapedia.ru/wh40k10ed/factions/space-marines/`
  - `https://wahapedia.ru/wh40k10ed/factions/space-marines/Wolf-Guard-Terminators`
  - `https://wahapedia.ru/wh40k10ed/factions/necrons/Immortals`
  - `https://wahapedia.ru/wh40k10ed/factions/orks/Boyz`

**ACTION REQUIRED:**
When building lists for new unit types:
1. Ask user for datasheet wargear structure if uncertain
2. Do NOT assume pattern from other units
3. User will provide correct wargear rules or better links

---

## Points Limit Enforcement âœ… VERIFIED
**Source:** Warhammer 40k 10th Edition Matched Play Rules
**Last Verified:** 2025-12-23

**THE RULE:**
Points limits are HARD CAPS in matched play:
- 500pt games: Maximum 500pts (not 501, not 510)
- 1000pt games: Maximum 1000pts
- 2000pt games: Maximum 2000pts

**CRITICAL:**
- Going over by even 1 point = ILLEGAL list
- "Close enough" is not tournament legal
- Better to be under than over

**Validation History:**
- âŒ **2025-12-23 ERROR:** Recommended 1,010pt list for 1000pt game
  - **What went wrong:** Prioritized "maximizing enhancement value" over legality
  - **User correction:** "i feel like the rules of warhammer are 1000 points or under"
  - **Lesson learned:** Points limits are STRICT. Never exceed. Legal first, optimized second.

- âœ… **2025-12-23 CORRECTED:** Stayed at exactly 1,000pts by optimizing unit selection instead

**VALIDATION STEP:**
Before finalizing ANY list, verify total points â‰¤ mission size limit.

---

*Last Updated: 2025-12-23*
*Maintained by: Tacticus Agent*
*Version: 1.3*

## Ultramarines Gladius Task Force âœ… VERIFIED
**Source:** Wahapedia Ultramarines + Tournament Data
**Last Verified:** 2025-12-21
**Verification Method:** Adepticon 2025 + Dallas Open winning lists

**GLADIUS TASK FORCE DETACHMENT:**
- **Combat Doctrines:** Choose one per Command phase (each once per game)
  - Devastator: Units shoot after Advancing
  - Tactical: Units shoot + charge after Falling Back
  - Assault: Units charge after Advancing

**ENHANCEMENTS (Max 2 per army, max 1 per character):**
- **Artificer Armour** (10pts): 2+ save + Feel No Pain 5+
- **The Honour Vehement** (15pts): +1 Attack/Strength (+2 in Assault Doctrine)
- **Fire Discipline** (cost unknown): Sustained Hits 1, crit on 5+ in Devastator
- **Adept of the Codex** (cost unknown): Unit counts as in Tactical Doctrine

**VERIFIED POINTS COSTS:**
- Roboute Guilliman: 345pts
- Marneus Calgar: 210pts (includes 2x Victrix Honour Guard)
- Captain in Gravis Armour: 90pts
- Lieutenant: 70pts
- Ballistus Dreadnought: 140pts
- Redemptor Dreadnought: ~200pts (estimated)
- Intercessor Squad (10 models): 80pts
- Assault Intercessor Squad (10 models): 90pts
- Infernus Squad (10 models): ~85pts (estimated)
- Infernus Squad (5 models): ~45pts (estimated)

**ADEPTICON 2025 WINNING LIST (Conan Jennings):**
- Roboute Guilliman (345) + Marneus Calgar (210) + Captain Gravis (90) + Lieutenant (70)
- 3x Ballistus Dreadnought (420pts total)
- 2x Vindicator (370pts total)
- Intercessor support troops
- **Result:** Won Adepticon 2025 + Dallas Open 2025 (undefeated)

---

## Wahapedia CSV Data Integration âœ… IMPLEMENTED
**Last Updated:** 2025-12-22
**Status:** Active - Auto-refresh weekly

**PURPOSE:**
Integration of official Wahapedia CSV data exports to eliminate manual datasheet lookups and ensure points/wargear accuracy.

**DATA HIERARCHY:**
1. **Wahapedia CSVs:** Official source of truth for stats, points, wargear
2. **rules-validated.md:** User corrections, mistake logs, learned patterns
3. **When conflicts exist:** rules-validated.md overrides CSV (user has corrected an error)

**LOADING PROTOCOL:**
1. On agent activation: Check CSV age (auto-refresh if >7 days old)
2. Load core-rules.json + factions-index.json on startup
3. On faction request: Load faction-specific datasheets/rules/stratagems
4. Cross-reference rules-validated.md for known corrections

**CSV FILES USED:**
- `Datasheets.csv`: Unit profiles (id, name, faction_id, role, loadout, transport, points)
- `Datasheets_wargear.csv`: Equipment options with costs (datasheet_id, wargear_id, cost)
- `Datasheets_models.csv`: Individual model stats (M, T, SV, W, LD, OC)
- `Wargear_list.csv`: Weapon/equipment profiles (range, A, BS_WS, S, AP, D, abilities)
- `Abilities.csv`: Unit and faction abilities (id, name, type, description)
- `Stratagems.csv`: Detachment stratagems (id, name, CP_cost, description, detachment)
- `Factions.csv`: Faction index (id, name)

**PROCESSED FILES STRUCTURE:**
```
_bmad/warhammer-40k/data/
â”œâ”€â”€ wahapedia-10ed/              # Raw CSVs (auto-downloaded weekly)
â”‚   â””â”€â”€ last_update.csv          # Timestamp for refresh checks
â””â”€â”€ processed/                   # Agent-optimized JSON
    â”œâ”€â”€ core-rules.json          # Core abilities (lore trimmed)
    â”œâ”€â”€ factions-index.json      # Faction list
    â””â”€â”€ {faction-id}/            # Per-faction data
        â”œâ”€â”€ datasheets.json      # Full unit stats + wargear
        â”œâ”€â”€ rules.json           # Faction abilities
        â””â”€â”€ stratagems.json      # Detachment stratagems
```

**EXAMPLE USAGE:**
```
User: "Build a Space Wolves 2000pt list"

Agent:
1. Load processed/SM/datasheets.json (Space Marines includes Space Wolves)
2. Filter for Space Wolves units (faction_id match)
3. Query units where role in ['HQ', 'Troops', 'Elites', 'Heavy Support']
4. Cross-check rules-validated.md for Pack Leader wargear restriction (known override)
5. Build list using CSV points + rules-validated corrections
```

**BENEFITS:**
- âœ… No more "ask user for datasheet details" workarounds
- âœ… Perfect wargear validation (Pack Leader restrictions from CSV)
- âœ… Instant points accuracy (always current)
- âœ… Offline capability (CSVs cached locally)
- âœ… Weekly auto-refresh ensures rules updates (errata, FAQs, points changes)

**MANUAL REFRESH:**
Use the `refresh-data` menu trigger to force download + reprocess if needed.

---
